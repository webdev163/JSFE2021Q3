!function(){"use strict";var e,t={786:function(e,t,n){var a,r,s,o,i=n(791),c=n(951),l=n(976),d=n(135),u=n.n(d),v=function(){function e(){(0,c.Z)(this,e)}return(0,l.Z)(e,null,[{key:"render",value:function(e){return new Promise((function(t){var n=document.getElementById("app");document.body.classList.remove("loaded"),setTimeout((function(){n.innerHTML=e,t(null)}),750)})).then((function(){setTimeout((function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),200)}),200)}))}}]),e}(),m=function(){function e(){(0,c.Z)(this,e)}var t;return(0,l.Z)(e,null,[{key:"setEventListeners",value:function(){var e=document.querySelector(".main-link"),t=document.querySelector(".toys-link"),n=document.querySelector(".tree-link"),a=document.querySelector(".main-btn");e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation()})),t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),document.dispatchEvent(new Event("render-filters"))})),n.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),document.dispatchEvent(new Event("render-tree"))})),a.addEventListener("click",(function(){document.dispatchEvent(new Event("render-filters"))}))}},{key:"render",value:(t=(0,i.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,v.render('<main class="main-container"> <nav class="main-menu main-page"> <ul class="main-menu-list"> <li class="main-menu-item active"><a href="" class="main-link">Главная</a></li> <li class="main-menu-item"><a href="" class="toys-link">Игрушки</a></li> <li class="main-menu-item"><a href="" class="tree-link">Ёлка</a></li> </ul> </nav> <div class="main-content-wrapper"> <div class="main-title-wrapper"> <h1 class="main-title">Помогите бабушке нарядить елку</h1> </div> <div class="main-btn-wrapper"> <button class="main-btn btn">Начать</button> </div> </div> </main> <footer class="main-footer"> <div class="footer-container"> <div class="footer-info-wrapper"> <a class="footer-github-link" href="https://github.com/webdev163" target="_blank"> <img src="assets/img/github-logo.svg" width="30" height="30" alt="Github logo"> </a> <a class="footer-rsschool" href="https://rs.school/js/" target="_blank"> <img class="footer-rsschool-img" src="assets/img/rs_school_js.svg" width="75" height="25" alt="RS School logo"> </a> <div class="footer-copyright">&copy; 2021</div> </div> </div> </footer>').then((function(){t.setEventListeners()}));case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();!function(e){e.alphabetSort="alphabet-sort",e.alphabetSortReversed="alphabet-sort-reverse",e.yearSort="year-sort",e.yearSortReversed="year-sort-reverse"}(a||(a={})),function(e){e[e.sliderCountMin=1]="sliderCountMin",e[e.sliderCountMax=12]="sliderCountMax",e[e.sliderYearMin=1940]="sliderYearMin",e[e.sliderYearMax=2020]="sliderYearMax"}(r||(r={})),function(e){e.search="search",e.color="color",e.shape="shape",e.size="size",e.favorite="favorite",e.minmax="minmax",e.sort="sort"}(s||(s={})),function(e){e.background="background",e.tree="tree",e.lights="lights",e.snowflakes="snowflakes",e.sound="sound"}(o||(o={}));var p,h,g=[[20,16,12,8,4,0,-4,-8,-12,-16,-20],[20,16,8,4,0,-4,-8,-16,-20],[20,16,8,0,-8,-16,-20],[20,14,0,-14,-20],[16,0,-16]],f=[[-25,-15,-6,0,6,8,6,0,-6,-15,-25],[-20,-7,0,6,8,6,0,-7,-20],[-20,-7,0,4,0,-7,-20],[-20,-7,-2,-7,-20],[-10,-5,-10]],y=[11,9,7,5,3],b=function(){function e(t){(0,c.Z)(this,e),this.initArr=t,this.state={query:"",sort:a.alphabetSort,shape:[],color:[],size:[],isFavorite:!1,minCount:r.sliderCountMin,maxCount:r.sliderCountMax,minYear:r.sliderYearMin,maxYear:r.sliderYearMax},this.chosenArr=[]}return(0,l.Z)(e,[{key:"filterSearch",value:function(e){var t=this,n=e;this.state.query&&(n=e.filter((function(e){return e.name.toLowerCase().includes(t.state.query.toLowerCase())}))),this.filterColor(n)}},{key:"filterColor",value:function(e){var t=this,n=e;this.state.color.length&&(n=e.filter((function(e){return t.state.color.includes(e.color)}))),this.filterShape(n)}},{key:"filterShape",value:function(e){var t=this,n=e;this.state.shape.length&&(n=e.filter((function(e){return t.state.shape.includes(e.shape)}))),this.filterSize(n)}},{key:"filterSize",value:function(e){var t=this,n=e;this.state.size.length&&(n=e.filter((function(e){return t.state.size.includes(e.size)}))),this.filterFavorite(n)}},{key:"filterFavorite",value:function(e){var t=e;this.state.isFavorite&&(t=e.filter((function(e){return e.isFavorite}))),this.filterSliders(t)}},{key:"filterSliders",value:function(e){var t=this,n=e.filter((function(e){return+e.count>=t.state.minCount&&+e.count<=t.state.maxCount&&+e.year>=t.state.minYear&&+e.year<=t.state.maxYear}));this.sort(n)}},{key:"sort",value:function(e){var t=e;switch(this.state.sort){case a.alphabetSort:t=this.sortText(e);break;case a.alphabetSortReversed:t=this.reverseArr(this.sortText(e));break;case a.yearSort:t=this.sortYear(e);break;case a.yearSortReversed:t=this.reverseArr(this.sortYear(e))}this.generateCards(t)}},{key:"sortText",value:function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))}},{key:"sortYear",value:function(e){return e.sort((function(e,t){return Number(e.year)-Number(t.year)}))}},{key:"reverseArr",value:function(e){return e.reverse()}},{key:"resetFilters",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];document.querySelectorAll('input[type="checkbox"]').forEach((function(e){return e.checked=!1})),document.querySelectorAll(".shape-btn").forEach((function(e){return e.classList.remove("active")})),document.querySelector(".search-input").value="",document.querySelector(".clear-btn").classList.remove("active"),document.querySelector(".search-input").classList.remove("active"),this.state.query="",this.state.shape=[],this.state.color=[],this.state.size=[],this.state.isFavorite=!1,e&&document.dispatchEvent(new Event("reset-sliders"))}},{key:"generateCards",value:function(e){var t=this,n=document.querySelector(".cards-wrapper");n.innerHTML&&(n.innerHTML=""),e&&!e.length&&(n.innerHTML='<p class="no-overlap-title">Извините, совпадений не найдено</p>');var a=[];null!==localStorage.getItem("webdev163-chosen")&&(a=JSON.parse(localStorage.getItem("webdev163-chosen")||""),document.querySelector(".toys-count-num").textContent=String(a.length),this.chosenArr=a),e.map((function(e){var r=document.createElement("div");r.className="card-item hidden",r.dataset.num=e.num,a.includes(e.num)&&r.classList.add("chosen"),r.innerHTML=t.getCardHtml(e),n.append(r)})),this.animateCards()}},{key:"getCardHtml",value:function(e){var t=e.num,n=e.name,a=e.count,r=e.year,s=e.shape,o=e.color,i=e.size,c=e.isFavorite;return'\n      <h2 class="card-title">'.concat(n,'</h3>\n      <div class="card-content-wrapper">\n        <div class="card-img-wrapper">\n          <img class="card-img" src="assets/img/toys/').concat(t,'.png" alt="').concat(n,'">\n        </div>\n        <div class="card-text-wrapper">\n          <p class="count">Количество: ').concat(a,'</p>\n          <p class="year">Год покупки: ').concat(r,'</p>\n          <p class="shape">Форма: ').concat(s,'</p>\n          <p class="color">Цвет: ').concat(o,'</p>\n          <p class="size">Размер: ').concat(i,'</p>\n          <p class="favorite">Любимая: ').concat(c?"да":"нет",'</p>\n        </div>\n      </div>\n      <div class="card-btn-wrapper">\n        <button class="add-btn btn">Добавить</button>\n        <button class="delete-btn btn">Удалить</button>\n      </div>\n    ')}},{key:"animateCards",value:function(){var e,t,n=function(){e=document.querySelectorAll(".hidden"),t=window.innerHeight},a=function(){for(var n=0;n<e.length;n+=1){var a=e[n];a.getBoundingClientRect().top-t<=-100&&(a.classList.add("animated"),a.classList.remove("hidden"))}};window.addEventListener("scroll",a),window.addEventListener("resize",n),n(),a()}}]),e}(),k=n(344),S=n(726),w=n.n(S),L=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];clearTimeout(t),t=setTimeout((function(){return e.call(r)}),n)}},x=function(){var e,t,n,a,s=document.getElementById("count-slider-wrapper"),o=document.getElementById("count-slider-value-min"),i=document.getElementById("count-slider-value-max"),c=document.getElementById("year-slider-wrapper"),l=document.getElementById("year-slider-value-min"),d=document.getElementById("year-slider-value-max"),u=r.sliderCountMin,v=r.sliderCountMax,m=r.sliderYearMin,p=r.sliderYearMax;if(null!==localStorage.getItem("webdev163-filters")){var h=JSON.parse(localStorage.getItem("webdev163-filters")||"");u=h.minCount,v=h.maxCount,m=h.minYear,p=h.maxYear}k.create(s,{range:{min:r.sliderCountMin,max:r.sliderCountMax},step:1,start:[u,v],format:w()({decimals:0}),connect:!0}),null==s||null===(e=s.noUiSlider)||void 0===e||e.on("update",(function(e){o.innerHTML=String(e[0]),i.innerHTML=String(e[1])})),null==s||null===(t=s.noUiSlider)||void 0===t||t.on("change",(function(){document.dispatchEvent(new Event("slider-change"))})),k.create(c,{range:{min:r.sliderYearMin,max:r.sliderYearMax},step:10,start:[m,p],format:w()({decimals:0}),connect:!0}),null==c||null===(n=c.noUiSlider)||void 0===n||n.on("update",(function(e){l.innerHTML=String(e[0]),d.innerHTML=String(e[1])})),null==c||null===(a=c.noUiSlider)||void 0===a||a.on("set",(function(){document.dispatchEvent(new Event("slider-change"))})),document.addEventListener("reset-sliders",(function(){var e,t;null==s||null===(e=s.noUiSlider)||void 0===e||e.set([r.sliderCountMin,r.sliderCountMax]),null==c||null===(t=c.noUiSlider)||void 0===t||t.set([r.sliderYearMin,r.sliderYearMax])}))},E=function(){var e=document.querySelector(".popup"),t=document.querySelector(".popup-btn"),n=document.querySelector("#overlay");e.classList.add("active"),setTimeout((function(){n.classList.add("active")}),200),t.addEventListener("click",(function(){e.classList.remove("active"),n.classList.remove("active")}),{once:!0})},q=function(){function e(){(0,c.Z)(this,e)}var t;return(0,l.Z)(e,null,[{key:"getJson",value:(t=(0,i.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,fetch("https://raw.githubusercontent.com/webdev163/image-data/master/toysdata.json");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),C=function(){function e(){(0,c.Z)(this,e)}var t;return(0,l.Z)(e,null,[{key:"setEventListeners",value:function(){var e=this,t=document.querySelector(".sort-select"),n=document.querySelector(".reset-button"),a=document.querySelector(".reset-button-ls"),r=document.querySelector(".color-controls-wrapper"),o=document.querySelector(".custom-dropdown"),i=document.querySelector(".sort-select"),c=document.querySelector(".shape-controls-inner"),l=document.querySelectorAll(".checkbox-size-inner"),d=document.querySelector(".checkbox-favorite-inner"),u=document.querySelector(".search-input"),v=document.querySelector(".clear-btn"),m=document.querySelector(".grid-wrapper"),h=document.querySelector(".toys-count"),g=document.querySelector(".main-link"),f=document.querySelector(".toys-link"),y=document.querySelector(".tree-link");m.addEventListener("click",(function(t){t.target.closest(".card-item")&&e.chooseToy(t)})),t.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation(),o.classList.add("active")})),u.addEventListener("keyup",L((function(){e.updateState(s.search)}),1e3)),v.addEventListener("click",(function(){u.value="",e.updateState(s.search)})),t.addEventListener("change",(function(t){e.updateState(s.sort,t)})),c.addEventListener("click",(function(t){t.target.classList.contains("shape-btn")&&e.updateState(s.shape,t)})),l.forEach((function(t){return t.addEventListener("click",(function(t){t.target.classList.contains("size-controls-item")&&e.updateState(s.size,t)}))})),d.addEventListener("click",(function(t){t.target.classList.contains("favorite-controls-item")&&e.updateState(s.favorite,t)})),document.addEventListener("slider-change",L((function(){e.updateState(s.minmax)}),250)),n.addEventListener("click",(function(){p.resetFilters()})),a.addEventListener("click",(function(){localStorage.clear(),document.querySelector(".toys-count-num").textContent="0",p.chosenArr=[],t.value="alphabet-sort",p.state.sort="alphabet-sort",p.resetFilters()})),r.addEventListener("click",(function(t){t.target.classList.contains("color-controls-item")&&e.updateState("color",t)})),o.addEventListener("click",(function(e){var t=e.target;i.value=t.dataset.value,i.dispatchEvent(new Event("change")),o.classList.remove("active")})),window.onbeforeunload=function(){e.updateLocalstorage()},h.addEventListener("click",(function(){p.resetFilters(!1),e.showChosenToys()})),g.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),document.dispatchEvent(new Event("render-main"))})),f.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation()})),y.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),document.dispatchEvent(new Event("render-tree"))}))}},{key:"render",value:(t=(0,i.Z)(u().mark((function e(){var t,n,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t='<div class="container"> <main class="filters-main"> <div class="controls-wrapper"> <div class="controls-top"> <nav class="main-menu"> <ul class="main-menu-list"> <li class="main-menu-item"><a href="" class="main-link">Главная</a></li> <li class="main-menu-item active"><a href="" class="toys-link">Игрушки</a></li> <li class="main-menu-item"><a href="" class="tree-link">Ёлка</a></li> </ul> </nav> <div class="toys-count"><span class="toys-count-num">0</span></div> </div> <div class="controls-inner"> <div class="search-sorting-wrapper"> <input class="search-input" type="search" name="search" id="search-input" placeholder="Поиск" autocomplete="off" autofocus> <button class="clear-btn">x</button> <div class="sort-wrapper"> <select class="sort-select"> <option value="alphabet-sort">От А до Я</option> <option value="alphabet-sort-reverse">От Я до А</option> <option value="year-sort">По возрастанию</option> <option value="year-sort-reverse">По убыванию</option> </select> <div class="custom-dropdown"> <div class="custom-dropdown-item" data-value="alphabet-sort">От А до Я</div> <div class="custom-dropdown-item" data-value="alphabet-sort-reverse">От Я до А</div> <div class="custom-dropdown-item" data-value="year-sort">По возрастанию (год)</div> <div class="custom-dropdown-item" data-value="year-sort-reverse">По убыванию (год)</div> </div> </div> </div> <div class="shape-controls-wrapper"> <h2 class="shape-controls-title">Форма</h2> <div class="shape-controls-inner"> <div class="shape-content"> <button class="shape-btn shape-bell-btn" data-value="колокольчик"></button> <p class="shape-text">Колокол</p> </div> <div class="shape-content"> <button class="shape-btn shape-ball-btn" data-value="шар"></button> <p class="shape-text">Шар</p> </div> <div class="shape-content"> <button class="shape-btn shape-cone-btn" data-value="шишка"></button> <p class="shape-text">Шишка</p> </div> <div class="shape-content"> <button class="shape-btn shape-snowflake-btn" data-value="снежинка"></button> <p class="shape-text">Снежинка</p> </div> <div class="shape-content"> <button class="shape-btn shape-statuette-btn" data-value="фигурка"></button> <p class="shape-text">Фигурка</p> </div> </div> </div> <div class="count-slider-outer"> <h2 class="count-slider-title">Количество экземпляров</h2> <div id="count-slider-wrapper"></div> <div class="slider-values-wrapper"> <div id="count-slider-value-min">1</div> <div id="count-slider-value-max">12</div> </div> </div> <div class="year-slider-outer"> <h2 class="year-slider-title">Год приобретения</h2> <div id="year-slider-wrapper"></div> <div class="slider-values-wrapper"> <div id="year-slider-value-min">1940</div> <div id="year-slider-value-max">2020</div> </div> </div> <div class="color-controls-wrapper"> <h2 class="color-controls-title">Цвет</h2> <div class="color-controls-inner"> <label class="checkbox-wrapper"> <input class="color-controls-item" data-value="белый" type="checkbox" name="color" id="color-white" value="white"/> <span class="checkmark"></span> </label> <label class="checkbox-wrapper"> <input class="color-controls-item" data-value="желтый" type="checkbox" name="color" id="color-yellow" value="yellow"/> <span class="checkmark"></span> </label> <label class="checkbox-wrapper"> <input class="color-controls-item" data-value="красный" type="checkbox" name="color" id="color-red" value="red"/> <span class="checkmark"></span> </label> <label class="checkbox-wrapper"> <input class="color-controls-item" data-value="синий" type="checkbox" name="color" id="color-blue" value="blue"/> <span class="checkmark"></span> </label> <label class="checkbox-wrapper"> <input class="color-controls-item" data-value="зелёный" type="checkbox" name="color" id="color-green" value="green"/> <span class="checkmark"></span> </label> </div> </div> <div class="size-controls-wrapper"> <h2 class="size-controls-title">Размер</h2> <div class="size-controls-inner"> <div class="checkbox-size-inner"> <label class="checkbox-wrapper checkbox-size">Большой <input class="size-controls-item" type="checkbox" name="size" id="size-big" data-value="большой" value="white"/> <span class="checkmark"></span> </label> </div> <div class="checkbox-size-inner"> <label class="checkbox-wrapper checkbox-size">Средний <input class="size-controls-item" type="checkbox" name="size" id="size-middle" value="yellow" data-value="средний"/> <span class="checkmark"></span> </label> </div> <div class="checkbox-size-inner"> <label class="checkbox-wrapper checkbox-size">Маленький <input class="size-controls-item" type="checkbox" name="size" id="size-small" value="red" data-value="малый"/> <span class="checkmark"></span> </label> </div> </div> </div> <div class="favorite-controls-wrapper"> <div class="checkbox-favorite-inner"> <label class="checkbox-wrapper checkbox-size">Только любимые <input class="favorite-controls-item" type="checkbox" name="favorite" id="favorite"/> <span class="checkmark"></span> </label> </div> </div> <button type="button" class="reset-button btn">Сбросить фильтры</button> <button type="button" class="reset-button-ls btn">Сбросить настройки</button> <footer class="footer"> <div class="footer-container"> <div class="footer-info-wrapper"> <a class="footer-github-link" href="https://github.com/webdev163" target="_blank"> <img src="assets/img/github-logo.svg" width="30" height="30" alt="Github logo"> </a> <a class="footer-rsschool" href="https://rs.school/js/" target="_blank"> <img class="footer-rsschool-img" src="assets/img/rs_school_js.svg" width="75" height="25" alt="RS School logo"> </a> <div class="footer-copyright">&copy; 2021</div> </div> </div> </footer> </div> </div> <div class="null-flex-item"></div> <div class="grid-wrapper"> <h1 class="filters-title">Игрушки</h1> <div class="cards-wrapper"></div> </div> </main> <div class="popup"> <div class="popup-inner-wrapper"> <p class="popup-msg">Извините, все слоты заполнены</p> <button class="popup-btn btn">OK</button> </div> </div> <div id="overlay"></div> </div>',e.next=3,q.getJson();case 3:return n=e.sent,p=new b(n),e.next=7,v.render(t).then((function(){var e,t;a.getLocalstorage(),a.setEventListeners(),e=document.querySelector(".search-input"),t=document.querySelector(".clear-btn"),e.addEventListener("input",(function(){e.value?(e.classList.add("active"),t.classList.add("active")):(e.classList.remove("active"),t.classList.remove("active"))})),t.addEventListener("click",(function(){e.value="",e.dispatchEvent(new Event("input"))})),x(),setTimeout((function(){p.filterSearch(p.initArr)}),300)}));case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"updateState",value:function(e,t){switch(e){case s.sort:if(t){var n=t.target.value;p.state.sort=n}break;case s.search:var a=document.querySelector(".search-input").value;p.state.query=a;break;case s.color:if(t){var r=t.target.dataset.value||"";t.target.checked?p.state.color.push(r):p.state.color=p.state.color.filter((function(e){return e!==r}))}break;case s.shape:if(t){var o=t.target.dataset.value||"";t.target.classList.contains("active")?p.state.shape=p.state.shape.filter((function(e){return e!==o})):p.state.shape.push(o),t.target.classList.toggle("active")}break;case s.size:if(t){var i=t.target,c=i.dataset.value||"";i.checked?p.state.size.push(c):p.state.size=p.state.size.filter((function(e){return e!==c}))}break;case s.favorite:t&&(t.target.checked?p.state.isFavorite=!0:p.state.isFavorite=!1);break;case s.minmax:p.state.minCount=Number(document.getElementById("count-slider-value-min").textContent),p.state.maxCount=Number(document.getElementById("count-slider-value-max").textContent),p.state.minYear=Number(document.getElementById("year-slider-value-min").textContent),p.state.maxYear=Number(document.getElementById("year-slider-value-max").textContent)}p.filterSearch(p.initArr)}},{key:"chooseToy",value:function(e){var t=e.target.closest(".card-item");if(t){var n=t.dataset.num,a=document.querySelector(".toys-count-num"),r=Number(a.textContent);if(t.classList.contains("chosen"))t.classList.remove("chosen"),p.chosenArr=p.chosenArr.filter((function(e){return e!==n})),r--,a.textContent=String(r);else{if(p.chosenArr.length>=20)return void E();t.classList.add("chosen"),p.chosenArr.push(n),r++,a.textContent=String(r)}localStorage.setItem("webdev163-chosen",JSON.stringify(p.chosenArr))}}},{key:"updateLocalstorage",value:function(){localStorage.setItem("webdev163-filters",JSON.stringify(p.state))}},{key:"getLocalstorage",value:function(){if(null!==localStorage.getItem("webdev163-filters")){var e=JSON.parse(localStorage.getItem("webdev163-filters")||"");document.querySelector(".sort-select").value=e.sort,e.color.forEach((function(e){document.querySelector(".color-controls-item[data-value=".concat(e,"]")).checked=!0})),e.shape.forEach((function(e){document.querySelector(".shape-btn[data-value=".concat(e,"]")).classList.add("active")})),e.size.forEach((function(e){document.querySelector(".size-controls-item[data-value=".concat(e,"]")).checked=!0})),e.isFavorite&&(document.querySelector(".favorite-controls-item").checked=!0),p.state=e}}},{key:"showChosenToys",value:function(){var e=[],t=p.initArr;null!==localStorage.getItem("webdev163-chosen")&&(e=JSON.parse(localStorage.getItem("webdev163-chosen")||""),t=t.filter((function(t){return e.includes(t.num)}))),p.generateCards(t),e.length||(document.querySelector(".cards-wrapper").innerHTML='<p class="no-overlap-title">Вы не выбрали ни одной игрушки</p>')}}]),e}(),T=function(){function e(){(0,c.Z)(this,e),this.state={treeNum:"1",backgroundNum:"1",lights:"multicolor",isLightsChecked:!0,isSnowflakesChecked:!1,isSoundChecked:!1},this.activeToys={},this.gridState={}}var t;return(0,l.Z)(e,null,[{key:"generateLightropes",value:function(){for(var e=document.querySelector(".lightrope-wrapper"),t=0;t<5;t++){var n=document.createElement("UL");n.className="lightrope";for(var a=0;a<y[t];a++){var r=document.createElement("LI");r.style.transform="rotate(".concat(g[t][a],"deg) translateY(").concat(f[t][a],"px)"),n.append(r)}e.append(n)}}},{key:"createSnowflake",value:function(){var e=document.createElement("i"),t=document.querySelector(".center-wrapper");e.classList.add("fas"),e.classList.add("fa-snowflake"),e.style.left=String(Math.random()*window.innerWidth+"px"),e.style.animationDuration=String(3*Math.random()+2+"s"),e.style.opacity=String(Math.random()),e.style.height=e.style.width=String(10*Math.random()+10+"px"),t.appendChild(e),setTimeout((function(){e.remove()}),5e3)}},{key:"generateToys",value:(t=(0,i.Z)(u().mark((function e(){var t,n,a,r,s,o,i,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=document.querySelector(".choose-toy-grid"),e.next=4,q.getJson();case 4:for(a=e.sent,null!==localStorage.getItem("webdev163-chosen")&&(t=JSON.parse(localStorage.getItem("webdev163-chosen")||"")),r=t.length?t.map((function(e){return a[Number(e)-1]})):a.slice(0,20),s=0;s<20;s++){if((o=document.createElement("div")).className="choose-toy-grid-item",o.dataset.item=String(s),r[s])for((i=document.createElement("p")).className="toy-count",i.textContent=r[s].count,o.append(i),c=0;c<Number(r[s].count);c++)(l=document.createElement("img")).className="toy-img",l.src="assets/img/toys/".concat(r[s].num,".png"),l.dataset.imgnum=String(s),l.draggable=!1,o.append(l);n.append(o)}this.handleToysDrag();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleToysDrag",value:function(){var e=this;document.querySelectorAll("#active-toys .toy-img, .choose-toy-grid .toy-img").forEach((function(t){return t.addEventListener("mousedown",(function(n){var a=t,r=a.dataset.imgnum,s=document.querySelector('[data-item="'.concat(r,'"]'));if(e.updateToyCount(s),a.classList.contains("toy-img")){var o=n,i=o.clientX-a.getBoundingClientRect().left,c=o.clientY-a.getBoundingClientRect().top,l=!1,d=function(e){var t,n;a.style.cursor="not-allowed",t=e.pageX,n=e.pageY,a.style.left=String((t-i)/window.innerWidth*100+"%"),a.style.top=String((n-c)/window.innerHeight*100+"%"),a.hidden=!0;var r=document.elementFromPoint(e.pageX,e.pageY);a.hidden=!1,r&&(l=!!r.closest(".droppable"))&&(a.style.cursor="copy")};a.ondragstart=function(){return!1},a.style.position="absolute",a.style.zIndex=String(1e3),document.querySelector("#active-toys").append(a),d(o),document.addEventListener("mousemove",d),document.addEventListener("mouseup",(function(){document.removeEventListener("mousemove",d),a.onmouseup=null,l||(a.remove(),null==s||s.append(a),a.removeAttribute("style")),e.updateToyCount(s),a.style.cursor="move"}),{once:!0})}}))}))}},{key:"updateToyCount",value:function(e){var t=e.querySelectorAll("img").length;e.querySelector(".toy-count").textContent=String(t)}}]),e}(),M=new Audio("audio/audio.mp3"),I=function(){function e(){(0,c.Z)(this,e)}var t;return(0,l.Z)(e,null,[{key:"setEventListeners",value:function(){var e=this,t=document.querySelector(".main-link"),n=document.querySelector(".toys-link"),a=document.querySelector(".tree-link"),r=document.querySelector(".choose-tree-grid"),s=document.querySelector(".choose-bg-grid"),i=document.querySelector(".garland-button-wrapper"),c=document.querySelector(".garland-checkbox-wrapper"),l=document.querySelector(".control-btn-sound"),d=document.querySelector(".control-btn-snowflake"),u=document.querySelector(".tree-reset-button"),v=document.querySelector(".tree-save-button"),m=document.querySelector(".tree-delete-toys-button"),p=document.querySelectorAll(".done-tree-grid-item");t.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.emptyTreeToys(),M.pause(),e.snowflakesDisable(),document.dispatchEvent(new Event("render-main"))})),n.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.emptyTreeToys(),M.pause(),e.snowflakesDisable(),document.dispatchEvent(new Event("render-filters"))})),a.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation()})),r.addEventListener("click",(function(t){t.target.dataset.num&&e.updateState(o.tree,t)})),s.addEventListener("click",(function(t){t.target.dataset.num&&e.updateState(o.background,t)})),i.addEventListener("click",(function(t){t.target.dataset.value&&e.updateState(o.lights,t)})),c.addEventListener("click",(function(t){t.target.classList.contains("slide-checkbox")&&e.updateState(o.lights,t)})),l.addEventListener("click",(function(){l.classList.toggle("active"),e.updateState(o.sound)})),d.addEventListener("click",(function(){d.classList.toggle("active"),e.updateState(o.snowflakes)})),u.addEventListener("click",(function(){e.resetSettings()})),v.addEventListener("click",(function(){e.saveTree()})),m.addEventListener("click",(function(){e.emptyTreeToys()})),p.forEach((function(t){return t.addEventListener("click",(function(t){e.handleTreeGridClick(t)}))}))}},{key:"render",value:(t=(0,i.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,v.render('<main class="main-tree-wrapper"> <div class="left-side-wrapper"> <nav class="main-menu"> <ul class="main-menu-list"> <li class="main-menu-item"><a href="" class="main-link">Главная</a></li> <li class="main-menu-item"><a href="" class="toys-link">Игрушки</a></li> <li class="main-menu-item active"><a href="" class="tree-link">Ёлка</a></li> </ul> </nav> <div class="control-btn-wrapper"> <img class="control-btn-sound control-btn" src="assets/img/sound.svg" alt="Включить музыку"> <img class="control-btn-snowflake control-btn" src="assets/img/snowflake.svg" alt="Включить снегопад"> </div> <div class="choose-tree-wrapper"> <p class="choose-tree-title tree-title">Выберите ёлку</p> <div class="choose-tree-grid"> <div class="choose-tree-grid-item" data-num="1"></div> <div class="choose-tree-grid-item" data-num="2"></div> <div class="choose-tree-grid-item" data-num="3"></div> <div class="choose-tree-grid-item" data-num="4"></div> </div> </div> <div class="choose-bg-wrapper"> <p class="choose-bg-title tree-title">Выберите фон</p> <div class="choose-bg-grid"> <div class="choose-bg-grid-item" data-num="1"></div> <div class="choose-bg-grid-item" data-num="2"></div> <div class="choose-bg-grid-item" data-num="3"></div> <div class="choose-bg-grid-item" data-num="4"></div> <div class="choose-bg-grid-item" data-num="5"></div> <div class="choose-bg-grid-item" data-num="6"></div> <div class="choose-bg-grid-item" data-num="7"></div> <div class="choose-bg-grid-item" data-num="8"></div> </div> </div> <div class="choose-garland-wrapper"> <p class="choose-garland-title tree-title">Гирлянда</p> <div class="garland-controls-wrapper"> <div class="garland-button-wrapper"> <button class="garland-button garland-button-multicolor" data-value="multicolor"></button> <button class="garland-button garland-button-red" data-value="red"></button> <button class="garland-button garland-button-blue" data-value="blue"></button> <button class="garland-button garland-button-yellow" data-value="yellow"></button> <button class="garland-button garland-button-green" data-value="green"></button> </div> <div class="garland-checkbox-wrapper"> <label class="label-checkbox" for="checkbox-garland"></label> <input class="slide-checkbox slide-checkbox-garland" type="checkbox" name="checkbox-garland" id="checkbox-garland" checked="checked"> <label class="custom-checkbox" for="checkbox-garland"></label> </div> </div> </div> <div class="tree-btn-wrapper"> <button type="button" class="tree-reset-button btn">Сбросить настройки</button> <button type="button" class="tree-save-button btn">Сохранить елку</button> <button type="button" class="tree-delete-toys-button btn">Удалить игрушки</button> </div> </div> <div class="center-wrapper"> <div class="tree-img-wrapper"> <map name="image-map" class="droppable"> <area coords="245,42,194,131,151,232,117,348,81,500,38,610,116,656,210,669,308,662,386,646,438,623,408,523,368,355,338,237,295,129" shape="poly"> </map> <img src="assets/img/tree/1.png" alt="" class="tree-img" usemap="#image-map"> <div class="lightrope-wrapper"></div> </div> </div> <div class="right-side-wrapper"> <div class="choose-toy-wrapper"> <p class="choose-toy-title tree-title">Игрушки</p> <div class="choose-toy-grid"></div> </div> <div class="done-tree-wrapper"> <p class="done-tree-title tree-title">Вы нарядили</p> <div class="done-tree-grid"> <div class="done-tree-grid-item" data-num="1"> <img class="done-tree-img" src="assets/img/tree/1.png" alt=""> <div class="done-tree-inner"> <div class="active-toys-wrapper"></div> </div> </div> <div class="done-tree-grid-item" data-num="2"> <img class="done-tree-img" src="assets/img/tree/2.png" alt=""> <div class="done-tree-inner"> <div class="active-toys-wrapper"></div> </div> </div> <div class="done-tree-grid-item" data-num="3"> <img class="done-tree-img" src="assets/img/tree/3.png" alt=""> <div class="done-tree-inner"> <div class="active-toys-wrapper"></div> </div> </div> <div class="done-tree-grid-item" data-num="4"> <img class="done-tree-img" src="assets/img/tree/4.png" alt=""> <div class="done-tree-inner"> <div class="active-toys-wrapper"></div> </div> </div> </div> </div> </div> </main> <div class="popup"> <div class="popup-inner-wrapper"> <p class="popup-msg">Елка успешно сохранена!</p> <button class="popup-btn btn">OK</button> </div> </div> <div id="overlay"></div> ').then((function(){h=new T,t.setEventListeners(),T.generateToys(),T.generateLightropes(),t.loadTree(),t.getLocalstorage()}));case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"emptyTreeToys",value:function(){var e=document.querySelector("#active-toys"),t=document.querySelector(".choose-toy-grid");e.innerHTML="",t.innerHTML="",T.generateToys()}},{key:"updateState",value:function(e,t){switch(e){case o.background:var n=(null==t?void 0:t.target).dataset.num;document.querySelector(".center-wrapper").style.backgroundImage='url("assets/img/bg/'.concat(n,'.jpg")'),h.state.backgroundNum=n;break;case o.tree:var a=(null==t?void 0:t.target).dataset.num;document.querySelector(".tree-img").src="assets/img/tree/".concat(a,".png"),h.state.treeNum=a;break;case o.lights:if((null==t?void 0:t.target).classList.contains("slide-checkbox")){var r=null==t?void 0:t.target;h.state.isLightsChecked=r.checked,document.querySelector(".lightrope-wrapper").classList.toggle("hidden")}else{var s=(null==t?void 0:t.target).dataset.value;document.querySelectorAll(".lightrope").forEach((function(e){var t=e;t.className="lightrope",t.classList.add(s),h.state.lights=s}))}break;case o.snowflakes:this.generateSnowflakes(),h.state.isSnowflakesChecked=!h.state.isSnowflakesChecked;break;case o.sound:document.querySelector(".control-btn-sound").classList.contains("active")?(h.state.isSoundChecked=!0,M.play()):(h.state.isSoundChecked=!1,M.pause())}this.updateLocalstorage()}},{key:"updateLocalstorage",value:function(){localStorage.setItem("webdev163-tree-settings",JSON.stringify(h.state))}},{key:"getLocalstorage",value:function(){if(null!==localStorage.getItem("webdev163-tree-settings")){var e=JSON.parse(localStorage.getItem("webdev163-tree-settings")||"");h.state=e,this.updateUI(h.state.treeNum,h.state.backgroundNum,h.state.lights,h.state.isLightsChecked,h.state.isSnowflakesChecked,h.state.isSoundChecked)}}},{key:"resetSettings",value:function(){h=new T,localStorage.removeItem("webdev163-tree-settings"),this.updateUI(null,null,"multicolor",!0,!1,!1)}},{key:"updateUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;document.querySelector('.choose-tree-grid-item[data-num="'.concat(e||"1",'"]')).click(),document.querySelector('.choose-bg-grid-item[data-num="'.concat(t||"1",'"]')).click(),document.querySelector(".garland-button-".concat(n)).click(),a||document.querySelector(".slide-checkbox-garland").click();var o=document.querySelector(".control-btn-snowflake");r&&e&&t?(o.classList.add("active"),this.generateSnowflakes()):o.classList.remove("active");var i=document.querySelector(".control-btn-sound");s?(i.classList.toggle("active"),e&&t&&(this.updateState("sound"),M.play())):(i.classList.remove("active"),M.pause(),M.currentTime=0)}},{key:"saveTree",value:function(){var e=document.getElementById("active-toys").innerHTML,t=document.querySelector(".choose-toy-grid").innerHTML,n=document.querySelector('.done-tree-grid-item[data-num="'.concat(h.state.treeNum,'"]')).querySelector(".active-toys-wrapper");h.activeToys[h.state.treeNum]=e,h.gridState[h.state.treeNum]=t,n.innerHTML="",n.innerHTML=e,localStorage.setItem("webdev163-done-tree",JSON.stringify(h.activeToys)),localStorage.setItem("webdev163-grid-state",JSON.stringify(h.gridState)),E(),this.loadTree()}},{key:"loadTree",value:function(){null!==localStorage.getItem("webdev163-done-tree")&&function(){var e=JSON.parse(localStorage.getItem("webdev163-done-tree")||""),t=function(t){var n=document.querySelector('.done-tree-grid-item[data-num="'.concat(t,'"]'));document.querySelector('.done-tree-grid-item[data-num="'.concat(t,'"] .active-toys-wrapper')).innerHTML=e[t],n.addEventListener("click",(function(){document.querySelector("#active-toys").innerHTML=e[t];var n=JSON.parse(localStorage.getItem("webdev163-grid-state")||""),a=document.querySelector(".choose-toy-grid");a.innerHTML="",a.innerHTML=n[t],T.handleToysDrag()}))};for(var n in e)t(n)}()}},{key:"handleTreeGridClick",value:function(e){var t=e.target.closest(".done-tree-grid-item").dataset.num,n=JSON.parse(localStorage.getItem("webdev163-done-tree")||"");document.querySelector('.choose-tree-grid-item[data-num="'.concat(t,'"]')).click(),t in n||this.emptyTreeToys()}},{key:"snowflakesDisable",value:function(){h.state.isSnowflakesChecked&&(document.querySelector(".control-btn-snowflake").click(),h.state.isSnowflakesChecked=!0,this.updateLocalstorage())}},{key:"generateSnowflakes",value:function(){var e=document.querySelector(".control-btn-snowflake"),t=setInterval((function(){e.classList.contains("active")?T.createSnowflake():clearInterval(t)}),50)}}]),e}();document.addEventListener("render-main",(function(){m.render()})),document.addEventListener("render-filters",(function(){C.render()})),document.addEventListener("render-tree",(function(){I.render()})),m.render(),console.log('\nВыполненные критерии:\n\n✔ Вёрстка страниц приложения и навигация между ними +30\n\n  - стартовая страница содержит название приложения и кнопку "Начать игру" или аналогичную. Выполняются требования к вёрстке +10\n  - на странице с ёлкой есть меню с настройками, слоты с добавленными в избранное игрушками, ёлка. Выполняются требования к вёрстке +10\n  - в header приложения есть навигация, которая позволяет с каждой страницы приложения перейти на две другие страницы +10\n\n✔ Меню с настройками +50\n\n  У пользователя есть возможность:\n  - выбрать один из нескольких (минимум 8) фонов +10\n  - выбрать одну из нескольких (минимум 4) ёлок +10\n  - включить/отключить падающий снег +10\n  - включить/отключить новогоднюю музыку +10\n  - выбранные настройки сохраняются в local storage и отображаются при перезагрузке страницы. Если музыка сохранилась включённой, она начинает играть при первом клике. Есть кнопка сброса настроек, которая очищает local storage +10\n\n✔ Гирлянда +40\n\n  У пользователя есть возможность:\n  - добавить на ёлку мерцающую разноцветную гирлянду +20\n  - выбрать один из нескольких (минимум 4) цветов лампочек гирлянды или оставить её разноцветной +10\n  - внешний вид гирлянды соответствует предложенному образцу или является его улучшенной версией +10\n\n✔ Игрушки в избранном +80\n\n  - в слотах находятся игрушки, которые были добавлены в избранное на странице с игрушками +10\n  - если в избранное не была добавлена ни одна игрушка, в слотах отображаются первые 20 игрушек коллекции исходных данных +10\n  - игрушки из слотов с игрушками можно перетянуть на ёлку используя drag and drop +10\n  - если в процессе перетягивания игрушку отпускают за пределами ёлки, она возвращается в свой слот +10\n  - повешенные на ёлку игрушки можно перетягивать в пределах ёлки +10\n  - повешенные на ёлку игрушки можно снимать с ёлки, при этом они возвращаются в свой слот +10\n  - возле слота с каждой игрушкой указывается количество игрушек в слоте равное количеству экземпляров игрушки в массиве с исходными данными +10\n  - когда игрушку "вешают на ёлку" количество игрушек в слоте уменьшается, когда игрушку "снимают с ёлки", количество игрушек в слоте увеличивается, когда все экземпляры игрушки помещаются на ёлку, отображается пустой слот +10\n\n✔ Дополнительный функционал на выбор +20\n\n  - есть кнопка "Сохранить" при клике по которой текущее состояние страницы с ёлкой сохраняется в local storage, изображение ёлки с размещёнными на ней игрушками добавляется в секцию "Вы нарядили". При клике по карточкам из этой секции восстанавливается состояние страницы с ёлкой на момент сохранения +10\n  - очень высокое качество оформления приложения + дополнительный функционал, а именно: +10\n    1. Дополнительная кнопка для сброса текущих игрушек, висящих на елке\n    2. Всплывающее окно с сообщением об успешном сохранении елки\n    3. Плавные переходы между страницами\n\nИтого: 220 / 220')},232:function(){}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e].call(s.exports,s,s.exports,a),s.exports}a.m=t,e=[],a.O=function(t,n,r,s){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],s=e[d][2];for(var i=!0,c=0;c<n.length;c++)(!1&s||o>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(i=!1,s<o&&(o=s));if(i){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={179:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,o=n[0],i=n[1],c=n[2],l=0;for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(c)var d=c(a);for(t&&t(n);l<o.length;l++)s=o[l],a.o(e,s)&&e[s]&&e[s][0](),e[o[l]]=0;return a.O(d)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),a.O(void 0,[736],(function(){return a(786)}));var r=a.O(void 0,[736],(function(){return a(232)}));r=a.O(r)}();